{% extends 'game_builds/base.html' %}

{% block title %}Случайный автомобиль - Forza Horizon 5{% endblock %}

{% block content %}
<!-- Основной контейнер с фоном и эффектами -->
<div class="container mt-5">
    <h1 class="text-center title mb-5">Случайный автомобиль</h1>

    <!-- Меню выбора класса -->
    <form method="get" action="{% url 'game_builds:generate_random_build' game.slug %}" class="mb-5">
        <label for="class" class="form-label text-light">Выберите класс:</label>
        <select name="class" id="class" class="form-select custom-select">
            <option value="">Все классы</option>
            <option value="D">D (0-500)</option>
            <option value="C">C (501-600)</option>
            <option value="B">B (601-700)</option>
            <option value="A">A (701-800)</option>
            <option value="S1">S1 (801-900)</option>
            <option value="S2">S2 (901-999)</option>
            <option value="X">X (999)</option>
        </select>
        <button type="submit" class="btn btn-custom mt-3">Сгенерировать</button>
    </form>

    <!-- Карточка с автомобилем -->
    <div class="card shadow-lg rounded-4 overflow-hidden card-custom">
        {% if build.car_image %}
        <img src="{{ build.car_image }}" alt="{{ build.car_name }}" width="1300" height="700">
        {% else %}
        <p>Изображение недоступно</p>
        {% endif %}
        <div class="card-body">
            <h5 class="card-title text-center text-uppercase">{{ build.car_name|default:"Название недоступно" }}</h5>
            <p class="text-center">
                Класс:
                <span class="badge" style="
                    background-color: 
                        {% if build.car_class == 'D' %}#4b5563{% endif %}
                        {% if build.car_class == 'C' %}#0284c7{% endif %}
                        {% if build.car_class == 'B' %}#16a34a{% endif %}
                        {% if build.car_class == 'A' %}#d97706{% endif %}
                        {% if build.car_class == 'S1' %}#dc2626{% endif %}
                        {% if build.car_class == 'S2' %}#7c3aed{% endif %}
                        {% if build.car_class == 'X' %}#facc15{% endif %}
                        {% if build.car_class == '' %}#1f2937{% endif %}
                ">
                    {{ build.car_class|default:"Не указан" }}
                </span>
            </p>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_styles %}
<style>
    /* Общий стиль страницы */
    body {
        background: linear-gradient(180deg, #0f172a 0%, #1e3a8a 100%);
        color: #ffffff;
        font-family: 'Montserrat', Arial, sans-serif;
        min-height: 100vh;
        background-attachment: fixed;
        position: relative;
        overflow-x: hidden;
    }

    /* Легкий неоновый эффект на фоне */
    body::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at 50% 20%, rgba(59, 130, 246, 0.2), transparent 70%);
        pointer-events: none;
        z-index: -1;
    }

    .container {
        max-width: 1000px;
        padding: 25px;
        background: rgba(15, 23, 42, 0.7);
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(8px);
    }

    /* Заголовок */
    .title {
        font-size: 3.2rem;
        font-weight: 900;
        text-transform: uppercase;
        background: linear-gradient(to right, #3b82f6, #a5b4fc);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: 0 0 15px rgba(59, 130, 246, 0.5);
        animation: neonGlow 2s infinite alternate;
    }

    /* Стили для формы */
    .form-label {
        font-size: 1.3rem;
        font-weight: 600;
        text-shadow: 0 2px 5px rgba(0, 0, 0, 0.4);
    }

    .custom-select {
        background-color: rgba(30, 64, 175, 0.2);
        color: #ffffff;
        border: 1px solid rgba(59, 130, 246, 0.5);
        border-radius: 12px;
        padding: 14px;
        font-size: 1.1rem;
        transition: all 0.3s ease;
    }

    .custom-select:focus {
        outline: none;
        border-color: #60a5fa;
        box-shadow: 0 0 12px rgba(96, 165, 250, 0.7);
    }

    .btn-custom {
        background: linear-gradient(45deg, #3b82f6, #9333ea);
        color: #ffffff;
        font-weight: 700;
        border: none;
        padding: 12px 35px;
        border-radius: 50px;
        transition: all 0.3s ease;
        box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
    }

    .btn-custom:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 20px rgba(59, 130, 246, 0.8);
        background: linear-gradient(45deg, #2563eb, #7e22ce);
    }

    /* Стили для карточки */
    .card-custom {
        background: rgba(17, 24, 39, 0.9);
        border: 1px solid rgba(59, 130, 246, 0.3);
        transition: all 0.3s ease;
    }

    .card-custom:hover {
        transform: scale(1.03);
        box-shadow: 0 10px 25px rgba(59, 130, 246, 0.4);
    }

    .card-body {
        background: linear-gradient(to bottom, rgba(17, 24, 39, 0.8), rgba(31, 41, 55, 1));
        border-radius: 0 0 15px 15px;
    }

    .card-title {
        font-size: 1.9rem;
        font-weight: 700;
        color: #a5b4fc;
        text-shadow: 0 2px 6px rgba(0, 0, 0, 0.6);
    }

    .badge {
        font-size: 1.2rem;
        padding: 10px 25px;
        border-radius: 30px;
        font-weight: 700;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.5);
        transition: all 0.3s ease;
    }

    .badge:hover {
        filter: brightness(1.3);
        transform: scale(1.05);
    }

    .no-image {
        background: #1e293b;
        color: #94a3b8;
        padding: 150px 0;
        font-size: 1.3rem;
        font-weight: 500;
    }

    /* Анимации */
    @keyframes neonGlow {
        from { text-shadow: 0 0 10px rgba(59, 130, 246, 0.5); }
        to { text-shadow: 0 0 20px rgba(59, 130, 246, 0.8); }
    }

    /* Медиа-запросы для адаптивности */
    @media (max-width: 768px) {
        .title { font-size: 2.2rem; }
        .card-img-top { height: 300px; }
        .container { padding: 15px; }
        .btn-custom { padding: 10px 25px; }
    }
</style>
{% endblock %}